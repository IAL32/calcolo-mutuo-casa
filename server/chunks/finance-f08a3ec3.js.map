{"version":3,"file":"finance-f08a3ec3.js","sources":["../../../.svelte-kit/adapter-node/chunks/finance.js"],"sourcesContent":["import { b as PeriodType, S as SellerType, P as PurposeType } from \"./mortgage.js\";\nconst REALTOR_FLAT_RATE_LIMIT = 15e4;\nconst REALTOR_FLAT_RATE = 6e3;\nconst REALTOR_RATE = 0.03;\nconst HOUSE_YIELD_CONSTANT = 115.5;\nconst REGISTRY_TAX_COMPANY = 200;\nconst MORTGAGE_TAX_PRIVATE = 50;\nconst MORTGAGE_TAX_COMPANY = 200;\nconst LAND_REGISTRY_TAX_PRIVATE = 50;\nconst LAND_REGISTRY_TAX_COMPANY = 200;\nconst HOUSE_SALE_NOTARY_COST = 1800;\nconst OPENING_MORTGAGE_COST = 250;\nconst HOUSE_EXAMINATION_COST = 250;\nconst ALTERNATE_TAX_FIRST_HOUSE = 25e-4;\nconst ALTERNATE_TAX_SECOND_HOUSE = 0.02;\nconst MORTGAGE_NOTARY_COST = 2400;\nconst pmt_ = (periodicInterestRate, totalNOfInterestPeriods, presentValue) => {\n  return presentValue * periodicInterestRate / (1 - Math.pow(1 + periodicInterestRate, -totalNOfInterestPeriods));\n};\nconst ipmt_ = (pmt, presentValue, annualPercenRate, interestPeriod) => {\n  return pmt + Math.pow(1 + annualPercenRate, interestPeriod - 1) * (presentValue * annualPercenRate - pmt);\n};\nconst calculateMortgage = (mortgageData) => {\n  const numberOfPeriods = mortgageData.period === PeriodType.MONTHS ? 1 : 12;\n  return pmt_(\n    mortgageData.taeg / 100 / numberOfPeriods,\n    mortgageData.time * numberOfPeriods,\n    mortgageData.total\n  );\n};\nconst calculateMortgageTotal = (mortgageData) => {\n  const numberOfPeriods = mortgageData.period === PeriodType.MONTHS ? 1 : 12;\n  return calculateMortgage(mortgageData) * mortgageData.time * numberOfPeriods;\n};\nconst calculate_principal_paid_amount = (mortgageData, interestPeriod) => {\n  const pmt = calculateMortgage(mortgageData);\n  return pmt - ipmt_(pmt, mortgageData.total, mortgageData.taeg / 100 / 12, interestPeriod);\n};\nconst calculate_interest_paid_amount = (mortgagedata, interestPeriod) => {\n  const pmt = calculateMortgage(mortgagedata);\n  return ipmt_(pmt, mortgagedata.total, mortgagedata.taeg / 100 / 12, interestPeriod);\n};\nconst calculateMortgagePlan = (mortgageData) => {\n  const numberOfPeriods = mortgageData.period === PeriodType.MONTHS ? 1 : 12;\n  const mortgage = calculateMortgage(mortgageData);\n  let remainingPrincipal = mortgageData.total;\n  return Array.from(Array(mortgageData.time * numberOfPeriods)).map((_, i) => {\n    const principalPaid = calculate_principal_paid_amount(mortgageData, i + 1);\n    return {\n      principalPaid,\n      interestPaid: calculate_interest_paid_amount(mortgageData, i + 1),\n      mortgagePaid: mortgage,\n      remainingPrincipal: remainingPrincipal -= principalPaid\n    };\n  });\n};\nconst calculate_realtor_cost = (useRealtor, houseValue) => {\n  if (!useRealtor)\n    return 0;\n  if (houseValue <= REALTOR_FLAT_RATE_LIMIT) {\n    return REALTOR_FLAT_RATE;\n  }\n  return REALTOR_RATE * houseValue;\n};\nconst calculate_registry_cost = (activeLaws, houseValue, houseYield, purpose, seller) => {\n  if (activeLaws.dl_73_2021) {\n    return 0;\n  }\n  const landRegistryValue = calculate_house_land_registry_value(houseYield);\n  if (seller === SellerType.COMPANY) {\n    return REGISTRY_TAX_COMPANY;\n  }\n  if (purpose == PurposeType.FIRST_HOUSE) {\n    return landRegistryValue * 0.02;\n  }\n  return houseValue * 0.09;\n};\nconst calculate_house_land_registry_value = (houseYield) => {\n  return houseYield * HOUSE_YIELD_CONSTANT;\n};\nconst calculate_mortgage_tax = (activeLaws, seller) => {\n  if (activeLaws.dl_73_2021) {\n    return 0;\n  }\n  return seller === SellerType.PRIVATE ? MORTGAGE_TAX_PRIVATE : MORTGAGE_TAX_COMPANY;\n};\nconst calculate_land_registry_tax = (activeLaws, seller) => {\n  if (activeLaws.dl_73_2021) {\n    return 0;\n  }\n  return seller === SellerType.PRIVATE ? LAND_REGISTRY_TAX_PRIVATE : LAND_REGISTRY_TAX_COMPANY;\n};\nconst calculate_house_sale_vat = (houseValue, purpose, seller) => {\n  if (seller === SellerType.PRIVATE) {\n    return 0;\n  }\n  if (purpose === PurposeType.FIRST_HOUSE) {\n    return houseValue * 0.04;\n  }\n  return houseValue * 0.1;\n};\nconst calculate_mortgage_alternate_tax = (activeLaws, houseValue, purpose) => {\n  if (activeLaws.dl_73_2021) {\n    return 0;\n  }\n  return purpose === PurposeType.FIRST_HOUSE ? houseValue * ALTERNATE_TAX_FIRST_HOUSE : houseValue * ALTERNATE_TAX_SECOND_HOUSE;\n};\nconst calculateHouseSaleCosts = (activeLaws, house) => {\n  const houseSaleCosts = {\n    realtor: calculate_realtor_cost(house.useRealtor, house.totalPrice),\n    registry: calculate_registry_cost(\n      activeLaws,\n      house.totalPrice,\n      house.yield,\n      house.purpose,\n      house.seller\n    ),\n    mortgageTax: calculate_mortgage_tax(activeLaws, house.seller),\n    landRegistryTax: calculate_land_registry_tax(activeLaws, house.seller),\n    vat: calculate_house_sale_vat(house.totalPrice, house.purpose, house.seller),\n    notary: HOUSE_SALE_NOTARY_COST,\n    total: 0\n  };\n  houseSaleCosts.total = houseSaleCosts.realtor + houseSaleCosts.registry + houseSaleCosts.mortgageTax + houseSaleCosts.vat + houseSaleCosts.notary + houseSaleCosts.landRegistryTax;\n  return houseSaleCosts;\n};\nconst calculateMortgageCosts = (activeLaws, houseValue, purpose) => {\n  const mortgageCosts = {\n    openingMortgage: OPENING_MORTGAGE_COST,\n    houseExamination: HOUSE_EXAMINATION_COST,\n    alternateTax: calculate_mortgage_alternate_tax(activeLaws, houseValue, purpose),\n    notary: MORTGAGE_NOTARY_COST,\n    total: 0\n  };\n  mortgageCosts.total = mortgageCosts.openingMortgage + mortgageCosts.houseExamination + mortgageCosts.alternateTax + mortgageCosts.notary;\n  return mortgageCosts;\n};\nexport {\n  calculateMortgageCosts as a,\n  calculateMortgagePlan as b,\n  calculateHouseSaleCosts as c,\n  calculateMortgage as d,\n  calculateMortgageTotal as e\n};\n"],"names":[],"mappings":"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"}